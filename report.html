<!DOCTYPE html>
<html>

<head>
    <title>CJ Arthur's Project 2 Report</title>
</head>

<body>
    <h2>Endpoints</h2>
    <ul>
        <li>curl -X POST localhost:8443/chain --header 'Content-Type: application/json' --data '{"name": "{chainName}",
            "phone": "{chainPhone}"}'</li>
        <li>curl -X POST localhost:8443/restaurant --header 'Content-Type: application/json' --data '{"location":
            "{restLocation}", "chainId": {chainId}}'</li>
        <li>curl -X POST localhost:8443/meaurement --header 'Content-Type: application/json' --data '{"restId":
            {restId}, "yearIn": {yearIn}, "monthIn": {monthIn}, "dayIn": {dayIn}, "timeIn": {timeIn}, "yearOut":
            {yearOut}, "monthOut": {monthOut}, "dayOut": {dayOut}, "timeOut": {timeOut}, "drivethrough":
            {drivethrough}}'</li>
        <li>curl -X POST localhost:8443/option --header 'Content-Type: application/json' --data '{"name":
            "{optionName}"}'</li>
        <li>curl -X POST localhost:8443/accessibility --header 'Content-Type: application/json' --data '{"optionId":
            {optionId}, "restId": {restId}}'</li>
        <li>curl localhost:8443/chain/{chainId}</li>
        <li>curl localhost:8443/restaurant/{restId}</li>
        <li>curl localhost:8443/option/{optionId}</li>
        <li>curl localhost:8443/measurement/{measId}</li>
        <li>curl localhost:8443/accessibility/{restid}/{optionId}</li>
        <li>curl localhost:8443/chains</li>
        <li>curl localhost:8443/phoneNumbers</li>
        <li>curl localhost:8443/phoneNumber/{chainName}</li>
        <li>curl localhost:8443/restaurantLocations/{isDrivethrough}</li>
        <li>curl localhost:8443/report.html</li>
        <li>curl -X PATCH localhost:8443/chain/{chainId} --header 'Content-Type: application/json' --data '{"name":
            "{chainName}", "phone": "{chainPhone}"}'</li>
        <li>curl -X PATCH localhost:8443/restaurant/{restId} --header 'Content-Type: application/json' --data
            '{"location": "{restLocation}", "chainId": {chainId}}'</li>
        <li>curl -X PATCH localhost:8443/option/{optionId} --header 'Content-Type: application/json' --data '{"name":
            "{optionName}"}'</li>
        <li>curl -X PATCH localhost:8443/measurement/{measId} --header 'Content-Type: application/json' --data '{"name":
            "{chainName}", "phone": "{chainPhone}"}'</li>
        <li>curl -X PATCH localhost:8443/chain/phoneNumber/{chainId} --header 'Content-Type: application/json' --data
            '{"phone": "{phoneNumber}"}'</li>
        <li>curl -X PATCH localhost:8443/restaurant/location/{restId} --header 'Content-Type: application/json' --data
            '{"location": "{location}"}'</li>
        <li>curl -X PATCH localhost:8443/chain/name/{chainId} --header 'Content-Type: application/json' --data '{"name":
            "{chainName}"}'</li>
        <li>curl -X DELETE localhost:8443/chain --header 'Content-Type: application/json' --data '{"id": {chainId}'</li>
        <li>curl -X DELETE localhost:8443/restaurant --header 'Content-Type: application/json' --data '{"id": {restId}'
        </li>
        <li>curl -X DELETE localhost:8443/measurement --header 'Content-Type: application/json' --data '{"measId":
            {measId}, "restId": {restId}, "yearIn": {yearIn}, "monthIn": {monthIn}, "dayIn": {dayIn}, "timeIn":
            {timeIn}, "yearOut": {yearOut}, "monthOut": {monthOut}, "dayOut": {dayOut}, "timeOut": {timeOut},
            "drivethrough": {drivethrough}}'</li>
        <li>curl -X DELETE localhost:8443/accessibility --header 'Content-Type: application/json' --data '{"restId":
            {restId}, "optionId": {optionId}'</li>
        <li>curl -X DELETE localhost:8443/option --header 'Content-Type: application/json' --data '{"id": {optionId}'
        </li>
    </ul>
    <h2>Report</h2>
    <ol>
        <li>The web service is not a to-do list manager.</li>
        <li>The web service uses a relational database written with MYSQL DDL.</li>
        <li>The web service uses express to deliver content.</li>
        <li>The web service is available on https://project2.shoresabroad.com:8443/.</li>
        <li>the web service's endpoints, and parameters are properly named.</li>
        <li>The web service sends and recieves complex data as JSON.</li>
        <li>The full spectrum of crud operations are supported for all tables.</li>
        <li>The database is only accessible from inside the droplet.</li>
        <li>The service is using an Nginx server.</li>
        <li>The service supports cross-origin resource sharing and has an options endpoint.</li>
        <li>The service is managed by pm2.</li>
        <li>The service is on a git repository and shared with twodee.</li>
        <li>The DDL is included in the repository, but the credentials for the server are not.</li>
        <li>My git repository has commits starting a few days ago until now.</li>
        <li>This service responds to https://project2.shoresabroad.com:8443/report.html with this page</li>
    </ol>
    <h2>Service description:</h2>
    <p>This service is built as the back end of a restaurant wait time app. It gets information and modifies from a
        database in 3NF. It has 5 tables: Chain, Restaurant, Measurement, Accessibility, and Option. Chain contains a
        name and a phone number, restaurant contains the location as a geohash that is accurate to 10 meters, and the
        chain that the restaurant is a part of. Restaurants that are not part of a proper "chain" still have a chain
        representation in the chains table to properly excersize "One version of the truth." The measurements table has
        the restaurant the measurement was made at, the time in, the time out, and whether the measurement was of a
        drivethrough or not. The options table is for things such as a restaurant offering gluten free or vegeterian
        options on their menu, and because of the many to many relationship of options and restaurants, the
        accessibility table is a linking table with the composite key of the restaurants id and the options id. To
        reduce processing time of the endpoint to allow for more traffic volume, all patch, post and delete requests
        only return a status of 204. All get requests return their important information. The goal of this web service
        was to reduce server-side processing time and instead offload things such as geohash translation and cross-table
        association to the client. These endpoints serve as something an admin would have access to, and in the end user
        application, the user will have access to fewer endpoints. The database contains anti-sql injection checks to
        verify that the user is not attempting to inject code into the server. The anti-injection code works by
        stripping escape sequences and the sql server is configured to stop its query upon encountering some for of
        request-parsing error. Due to the complexity of the database, I have provided the data-dependency diagram, and the data dictionary at the respective links: </p>
</body>

</html>